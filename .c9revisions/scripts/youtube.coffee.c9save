{"ts":1380609318772,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"# Description:\n#   Messing around with the YouTube API.\n#\n# Commands:\n#   hubot youtube me <query> - Searches YouTube for the query and returns the video embed link.\nmodule.exports = (robot) ->\n  robot.respond /(youtube|yt)( me)? (.*)/i, (msg) ->\n    query = msg.match[3]\n    robot.http(\"http://gdata.youtube.com/feeds/api/videos\")\n      .query({\n        orderBy: \"relevance\"\n        'max-results': 15\n        alt: 'json'\n        q: query\n      })\n      .get() (err, res, body) ->\n        videos = JSON.parse(body)\n        videos = videos.feed.entry\n\n        unless videos?\n          msg.send \"No video results for \\\"#{query}\\\"\"\n          return\n\n        video  = msg.random videos\n        video.link.forEach (link) ->\n          if link.rel is \"alternate\" and link.type is \"text/html\"\n            msg.send link.href\n\n"]],"start1":0,"start2":0,"length1":0,"length2":817}]],"length":817}
